<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>RetroMart Test</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
    th { background: #f0f0f0; }
  </style>
</head>
<body>
  <h1>RetroMart - Test Version</h1>
  <p id="status">Loading...</p>
  
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Product</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody id="products">
      <tr>
        <td colspan="3">Initializing...</td>
      </tr>
    </tbody>
  </table>

  <script>
    console.log('Script started');
    
    try {
      // Update status
      document.getElementById('status').textContent = 'Script running...';
      
      // Get data from localStorage
      const userGoals = localStorage.getItem('userGoals') 
        ? JSON.parse(localStorage.getItem('userGoals')) 
        : 'achieve your goals';
      
      const userInterests = localStorage.getItem('userInterests')
        ? JSON.parse(localStorage.getItem('userInterests'))
        : ['Gaming', 'Technology'];
      
      const sessionId = localStorage.getItem('sessionId') || 'USER_000000';
      
      console.log('Data loaded:', { userGoals, userInterests, sessionId });
      
      // Update status
      document.getElementById('status').textContent = 
        'Data loaded: ' + userGoals + ' | ' + userInterests.join(', ');
      
      // Create simple products
      const products = [
        { name: userInterests[0] + ' Starter Kit', price: '$29.99' },
        { name: userGoals + ' Guide', price: '$39.99' },
        { name: 'Your Profile #' + sessionId.replace('USER_', ''), price: '$0.47' }
      ];
      
      console.log('Products created:', products.length);
      
      // Render products
      const tbody = document.getElementById('products');
      tbody.innerHTML = '';
      
      products.forEach((product, i) => {
        const row = document.createElement('tr');
        row.innerHTML = 
          '<td>' + (i + 1) + '</td>' +
          '<td>' + product.name + '</td>' +
          '<td>' + product.price + '</td>';
        tbody.appendChild(row);
      });
      
      console.log('Products rendered successfully');
      document.getElementById('status').textContent = 
        'SUCCESS! Showing ' + products.length + ' products';
      
    } catch (error) {
      console.error('ERROR:', error);
      document.getElementById('status').textContent = 'ERROR: ' + error.message;
      document.getElementById('products').innerHTML = 
        '<tr><td colspan="3" style="color:red;">Error: ' + error.message + '</td></tr>';
    }
  </script>
</body>
</html>